<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Premium Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-color: #052c1e;
            --primary-accent: #4ade80;
            --card-bg: rgba(255, 255, 255, 0.08);
            --gold: #fbbf24;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            background: var(--bg-color);
            background-image: radial-gradient(circle at 10% 20%, rgba(26, 93, 66, 0.4) 0%, transparent 50%);
            color: #fff;
            font-family: 'Hind Siliguri', sans-serif;
            margin: 0;
            padding-bottom: 90px;
            overflow-x: hidden;
        }

        /* Page Management */
        .page { display: none; animation: slideUp 0.4s ease-out; }
        .page.active { display: block; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* Shared Components */
        .container { padding: 20px; max-width: 500px; margin: auto; }
        .app-section {
            background: var(--card-bg); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 28px; padding: 20px; margin-bottom: 20px;
        }

        /* Home Style */
        .header-card {
            background: linear-gradient(180deg, rgba(22, 101, 52, 0.8) 0%, var(--bg-color) 100%),
                        url('https://images.unsplash.com/photo-1542810634-71277d95dcbb?auto=format&fit=crop&w=800&q=80');
            background-size: cover; padding: 45px 20px; text-align: center; border-radius: 0 0 40px 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        #digital-clock { font-size: 55px; font-weight: 700; color: #fff; text-shadow: 0 0 20px rgba(74,222,128,0.5); }
        .prayer-row { display: flex; justify-content: space-between; padding: 15px; background: rgba(255,255,255,0.03); border-radius: 18px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); }

        /* Quran Styles */
        .surah-list { display: grid; gap: 12px; }
        .surah-card {
            background: var(--card-bg); padding: 18px; border-radius: 20px;
            display: flex; justify-content: space-between; align-items: center; border-left: 4px solid var(--primary-accent);
        }
        .quran-reader { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: #fff; color: #333; z-index: 2000; display: none;
            flex-direction: column;
        }
        .reader-header { padding: 20px; background: #052c1e; color: #fff; display: flex; align-items: center; gap: 15px; }
        .ayah-content { flex: 1; overflow-y: auto; padding: 20px; }
        .ayah-box { margin-bottom: 25px; border-bottom: 1px solid #f0f0f0; padding-bottom: 15px; }
        .ar { font-size: 28px; text-align: right; margin-bottom: 10px; font-family: 'serif'; color: #052c1e; line-height: 1.8; }
        .bn { font-size: 16px; color: #555; line-height: 1.6; }

        /* Audio Player Mini */
        .audio-player { padding: 15px; background: #f8f8f8; border-top: 1px solid #ddd; text-align: center; }
        audio { width: 100%; height: 35px; }

        /* Wellbeing Chart Styles */
        .chart-container { height: 250px; margin-top: 20px; }

        /* Navigation */
        .bottom-nav {
            position: fixed; bottom: 20px; left: 20px; right: 20px;
            background: rgba(11, 61, 46, 0.95); backdrop-filter: blur(20px);
            height: 75px; border-radius: 25px; display: flex;
            justify-content: space-around; align-items: center; z-index: 1500;
            border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .nav-item { color: rgba(255,255,255,0.5); text-decoration: none; font-size: 11px; text-align: center; transition: 0.3s; }
        .nav-item.active { color: var(--primary-accent); transform: translateY(-5px); }
        .nav-item i { font-size: 24px; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div id="home" class="page active">
        <div class="header-card">
            <div style="font-size: 14px; opacity: 0.8; letter-spacing: 1px;">LAKSHMIPUR, BANGLADESH</div>
            <div id="digital-clock">00:00:00</div>
            <div id="date-bn">লোডিং...</div>
        </div>
        <div class="container">
            <div class="app-section">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="text-align: center; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 20px;">
                        <span style="font-size: 12px; opacity: 0.7;">সাহরির শেষ</span>
                        <b id="sehri-time" style="display: block; font-size: 20px; color: var(--gold);">--:--</b>
                    </div>
                    <div style="text-align: center; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 20px;">
                        <span style="font-size: 12px; opacity: 0.7;">ইফতারের শুরু</span>
                        <b id="iftar-time" style="display: block; font-size: 20px; color: #fb7185;">--:--</b>
                    </div>
                </div>
            </div>
            <div class="app-section">
                <h3 style="margin-top:0; font-size: 18px; border-left: 4px solid var(--primary-accent); padding-left: 10px;">নামাজের সময়সূচী</h3>
                <div id="prayer-list"></div>
            </div>
            <div style="text-align: center; opacity: 0.3; font-size: 12px; margin-bottom: 20px;">© emti</div>
        </div>
    </div>

    <div id="quran" class="page">
        <div class="container">
            <h2 style="color: var(--primary-accent); margin-bottom: 20px;"><i class="fa-solid fa-book-quran"></i> আল-কুরআন</h2>
            <div id="surah-container" class="surah-list"></div>
        </div>
        
        <div id="quran-reader" class="quran-reader">
            <div class="reader-header">
                <i class="fa-solid fa-arrow-left" onclick="closeReader()" style="font-size: 20px;"></i>
                <div id="current-surah-name" style="font-weight: 600; font-size: 18px;">সুরা নাম</div>
            </div>
            <div class="ayah-content" id="ayah-list"></div>
            <div class="audio-player">
                <div id="player-title" style="font-size: 12px; margin-bottom: 5px; color: #666;">তেলাওয়াত প্লে করুন</div>
                <audio id="quran-audio" controls></audio>
            </div>
        </div>
    </div>

    <div id="settings" class="page">
        <div class="container">
            <h2 style="color: var(--primary-accent);"><i class="fa-solid fa-chart-line"></i> ওয়েলবিয়িং</h2>
            <div class="app-section">
                <p style="margin: 0; font-size: 14px; opacity: 0.8;">গত ৩০ দিনে কুরআন পাঠের সময় (মিনিট)</p>
                <div class="chart-container">
                    <canvas id="wellbeingChart"></canvas>
                </div>
            </div>
            <div class="app-section" style="text-align: center;">
                <h1 style="color: var(--gold); margin: 0;">১২</h1>
                <p style="margin: 5px 0;">মিনিট আজ পড়েছেন</p>
                <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 10px; margin-top: 15px;">
                    <div style="background: var(--primary-accent); width: 60%; height: 100%; border-radius: 10px;"></div>
                </div>
                <p style="font-size: 12px; opacity: 0.6; margin-top: 10px;">ডেইলি টার্গেট: ২০ মিনিট</p>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="navigate('home', this)"><i class="fa-solid fa-house"></i>Home</div>
        <div class="nav-item" onclick="navigate('quran', this)"><i class="fa-solid fa-book-quran"></i>Quran</div>
        <div class="nav-item" onclick="navigate('settings', this)"><i class="fa-solid fa-gear"></i>Set</div>
    </div>

    <script>
        // ১. সাধারণ লজিক
        function navigate(pageId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            el.classList.add('active');
            if(pageId === 'settings') initChart();
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('digital-clock').innerText = now.toLocaleTimeString('en-GB');
            document.getElementById('date-bn').innerText = now.toLocaleDateString('bn-BD', {weekday: 'long', day: 'numeric', month: 'long'});
        }
        setInterval(updateClock, 1000);

        // ২. হোম ডাটা (Lakshmipur)
        async function fetchHomeData() {
            const res = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Lakshmipur&country=Bangladesh&method=1');
            const data = await res.json();
            const t = data.data.timings;
            document.getElementById('sehri-time').innerText = t.Fajr;
            document.getElementById('iftar-time').innerText = t.Maghrib;

            const prayers = [{n:'ফজর', t:t.Fajr}, {n:'যোহর', t:t.Dhuhr}, {n:'আসর', t:t.Asr}, {n:'মাগরিব', t:t.Maghrib}, {n:'এশা', t:t.Isha}];
            document.getElementById('prayer-list').innerHTML = prayers.map(p => `
                <div class="prayer-row"><span>${p.n}</span><b>${p.t}</b></div>
            `).join('');
        }

        // ৩. কুরআন ডাটা ও অডিও
        async function fetchSurahList() {
            const res = await fetch('https://api.alquran.cloud/v1/surah');
            const data = await res.json();
            document.getElementById('surah-container').innerHTML = data.data.slice(0, 114).map(s => `
                <div class="surah-card" onclick="openSurah(${s.number}, '${s.englishName}')">
                    <div><b>${s.number}. ${s.englishName}</b><br><small style="opacity:0.6">${s.numberOfAyahs} Ayahs</small></div>
                    <div style="font-size: 20px; color: var(--gold);">${s.name}</div>
                </div>
            `).join('');
        }

        async function openSurah(id, name) {
            const reader = document.getElementById('quran-reader');
            reader.style.display = 'flex';
            document.getElementById('current-surah-name').innerText = name;
            document.getElementById('ayah-list').innerHTML = '<p style="text-align:center; padding: 50px;">লোড হচ্ছে...</p>';
            
            // Audio Set
            const audio = document.getElementById('quran-audio');
            audio.src = `https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${id}.mp3`;

            // Text Set
            const [resAr, resBn] = await Promise.all([
                fetch(`https://api.alquran.cloud/v1/surah/${id}`),
                fetch(`https://api.alquran.cloud/v1/surah/${id}/bn.bengali`)
            ]);
            const [dataAr, dataBn] = await Promise.all([resAr.json(), resBn.json()]);

            let html = '';
            dataAr.data.ayahs.forEach((ayah, i) => {
                html += `<div class="ayah-box">
                    <div class="ar">${ayah.text}</div>
                    <div class="bn">${dataBn.data.ayahs[i].text}</div>
                </div>`;
            });
            document.getElementById('ayah-list').innerHTML = html;
        }

        function closeReader() {
            document.getElementById('quran-reader').style.display = 'none';
            document.getElementById('quran-audio').pause();
        }

        // ৪. চার্ট লজিক
        let chartInstance = null;
        function initChart() {
            if (chartInstance) chartInstance.destroy();
            const ctx = document.getElementById('wellbeingChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 30}, (_, i) => i + 1),
                    datasets: [{
                        label: 'পাঠের সময়',
                        data: [5, 10, 8, 15, 20, 12, 18, 5, 10, 15, 20, 25, 10, 12, 18, 20, 15, 30, 25, 10, 5, 8, 12, 15, 20, 22, 18, 15, 12, 12],
                        borderColor: '#4ade80',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true,
                        backgroundColor: 'rgba(74, 222, 128, 0.1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { display: false }, x: { grid: { display: false }, ticks: { color: '#fff', font: { size: 10 } } } }
                }
            });
        }

        // শুরুতে কল হবে
        fetchHomeData();
        fetchSurahList();
        updateClock();
    </script>
</body>
  </html>
